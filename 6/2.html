<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>6</title>
    <meta name="description" content="6">
    <script src="//cdn.8thwall.com/web/aframe/8frame-0.8.2.min.js"></script>
    <!-- <script src="//cdn.8thwall.com/web/xrextras/xrextras.js"></script> -->
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="//cdn.rawgit.com/donmccurdy/aframe-physics-system/v4.0.1/dist/aframe-physics-system.min.js"></script>
    <script src="https://unpkg.com/aframe-text-geometry-component@0.5.1/dist/aframe-text-geometry-component.min.js"></script>
    <script async
    src="//apps.8thwall.com/xrweb?appKey=vlLDoiv6su89laVSuJGEgA4XY7zCHTd9vkGGVuxGA84dhKpnK41fjiCsI5hYDg3sv43rVy"></script>

    <script>
       AFRAME.registerComponent('probe', {
            schema: {
                amount: {
                    type: 'number',
                    default: 10
                },
                color: {
                    type: 'color',
                    default: 'red'
                },
                duration: {
                    type: 'number',
                    default: 10000
                },
                randScaleMax: {
                    type: 'number',
                    default: 3
                },
            },
            //custom function
            getRandomInt: function (min, max) {
                min = Math.ceil(min);
                max = Math.floor(max);
                return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive
            },

            getRandomColor: function () {
                var letters = '0123456789ABCDEF'.split('');
                var color = '#';
                for (var i = 0; i < 6; i++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                return color;
            },


            init: function () {

                for (let i = 1; i < this.data.amount; i++) {
                    let s = this.getRandomInt(1, this.data.randScaleMax);
                    let box = document.createElement('a-entity');
                    box.setAttribute('text-geometry', 'value: Reality');
                    box.setAttribute('color', this.getRandomColor());
                    box.setAttribute('dynamic-body', "linearDamping:.2 angularDamping:.2");
                    box.setAttribute('position', this.getRandomInt(-60, 60) + ' ' + this.getRandomInt(-
                        -60, 60) + ' ' + this.getRandomInt(-60, 60));
                    box.setAttribute('scale', s + ' ' + s + ' ' + s);
                    // box.setAttribute('scale', '20 20 20');
                    box.setAttribute('rotation', '0 0 ' + this.getRandomInt(-180, 180));
                    box.setAttribute('radius', i);
                    box.setAttribute('metalness', 1);
                    box.setAttribute('emissiveIntensity', 1);
                    box.setAttribute('flatShading', 0);
                    box.setAttribute('transparent', 'true');
                    box.setAttribute('opacity', this.getRandomInt(1, 9) * .1);

                    // box.setAttribute('animation', {
                    //     property: 'position',
                    //     dir: 'alternate',
                    //     dur: this.getRandomInt(5000, 30000),
                    //     delay: 2000,
                    //     to: this.getRandomInt(-100, 100) + ' ' + this.getRandomInt(-100, 100) + ' ' +
                    //         this.getRandomInt(-100, 100),
                    //     easing: 'easeInSine',
                    //     loop: true
                    // });

                    // box.setAttribute('animation__rot', {
                    //     property: 'rotation',
                    //     dir: 'alternate',
                    //     dur: this.getRandomInt(10000, 40000),
                    //     to: this.getRandomInt(0, 360) + ' ' + this.getRandomInt(0, 360) + ' ' +
                    //         this.getRandomInt(0, 360),
                    //     easing: 'easeInSine',
                    //     loop: true
                    // });

                    this.el.appendChild(box);

                }
            }
        });
    </script>
  </head>
  <body>
    <!-- <a-scene physics="gravity:-2.6" xrweb portal xrextras-almost-there xrextras-loading xrextras-runtime-error xrextras-tap-recenter> -->
            <a-scene physics="gravity:-2.6" xrweb portal xrextras-almost-there xrextras-loading xrextras-runtime-error xrextras-tap-recenter>  
        <a-assets>
        <img id="groundTexture" src="https://cdn.aframe.io/a-painter/images/floor.jpg" crossorigin="anonymous">
        <img id="skyTexture" src="https://cdn.aframe.io/a-painter/images/sky.jpg" crossorigin="anonymous">
      </a-assets>

      <!-- Primitives. -->
      <a-box position="-1 10 -3" rotation="0 45 0" color="#4CC3D9" dynamic-body="linearDamping:.98. angularDamping:.5"></a-box>
      <a-entity position="-1 10 -3" dynamic-body="linearDamping:.98. angularDamping:.5" text-geometry="value: What's up"></a-entity>
      <a-box static-body width=100000 height=0.01 depth=100000 visible="false"></a-box>
      <a-entity probe="amount: 50;randScaleMax: 20;" scale="0.1 0.1 0.1" dynamic-body="linearDamping:.99. angularDamping:.5"></a-entity>
      <!-- Background sky. -->
      <!-- <a-sky height="2048" radius="30" src="#skyTexture" theta-length="90" width="2048"></a-sky> -->

      <!-- Ground. -->
      <!-- <a-circle src="#groundTexture" rotation="-90 0 0" radius="32"></a-circle> -->
      <a-camera id="camera" position="0 5 8">
        </a-camera>
      
    </a-scene>
  </body>
</html>
